(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{101:function(e,t,a){},132:function(e,t,a){},133:function(e,t,a){"use strict";a.r(t);var r=a(1),c=a(27),n=a.n(c),s=(a(101),a(148)),i=a(139),d=a(140),o=a(83),l=a(0),j=a(141),u=a(147),b=a(20),p=a(6),h=(a(95),a(7)),O=a(9),x=a.n(O),m=a(14),f=a(15),g=a.n(f),y="USER_LOGIN_REQUEST",v="USER_LOGIN_SUCCESS",E="USER_LOGIN_FAIL",S="USER_LOGOUT",R="USER_REGISTER_REQUEST",N="USER_REGISTER_SUCCESS",C="USER_REGISTER_FAIL",_="USER_DETAIL_REQUEST",I="USER_DETAIL_SUCCESS",L="USER_DETAIL_FAIL",k="USER_UPDATE_PROFILE_REQUEST",D="USER_UPDATE_PROFILE_SUCCESS",T="USER_UPDATE_PROFILE_FAIL",w="USER_UPDATE_PROFILE_RESET",A="USER_LIST_REQUEST",U="USER_LIST_SUCCESS",P="USER_LIST_FAIL",F="USER_LIST_RESET",B="USER_DELETE_REQUEST",Q="USER_DELETE_SUCCESS",q="USER_DELETE_FAIL",M="ORDER_CREATE_REQUEST",z="ORDER_CREATE_SUCCESS",G="ORDER_CREATE_FAIL",V="ORDER_CREATE_RESET",Y="ORDER_DETAILS_REQUEST",J="ORDER_DETAILS_SUCCESS",W="ORDER_DETAILS_FAIL",H="ORDER_PAY_REQUEST",K="ORDER_PAY_SUCCESS",X="ORDER_PAY_FAIL",Z="ORDER_PAY_RESET",$="ORDER_MY_LIST_REQUEST",ee="ORDER_MY_LIST_SUCCESS",te="ORDER_MY_LIST_FAIL",ae="ORDER_MY_LIST_RESET",re="ORDER_LIST_REQUEST",ce="ORDER_LIST_SUCCESS",ne="ORDER_LIST_FAIL",se="ORDER_DELIVER_REQUEST",ie="ORDER_DELIVER_SUCCESS",de="ORDER_DELIVER_FAIL",oe="ORDER_DELIVER_RESET",le=a(8),je=a.p+"static/media/artisan-logo.bd1d6680.png",ue=function(){var e=Object(h.c)((function(e){return e.userLogin})).userInfo,t=Object(h.b)(),a=Object(le.t)();return Object(l.jsx)("header",{children:Object(l.jsx)(s.a,{className:"navbar navbar-expand-lg navbar-light bg-light",collapseOnSelect:!0,children:Object(l.jsxs)(i.a,{className:"container-fluid",children:[Object(l.jsx)(b.LinkContainer,{to:"",children:Object(l.jsx)(s.a.Brand,{className:"px-3",children:Object(l.jsx)("img",{src:je,alt:"Logo",style:{width:"200px"}})})}),Object(l.jsx)(s.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(l.jsx)("div",{style:{display:"flex"},className:"align-items-end",children:Object(l.jsx)(s.a.Collapse,{id:"basic-navbar-nav",children:Object(l.jsxs)(j.a,{children:[Object(l.jsx)(b.LinkContainer,{to:"/cart",children:Object(l.jsxs)(j.a.Link,{children:[Object(l.jsx)("i",{className:"fas fa-shopping-cart"})," Cart"]})}),e?Object(l.jsxs)(u.a,{title:e.name,id:"username",children:[Object(l.jsx)(b.LinkContainer,{to:"/profile",children:Object(l.jsxs)(u.a.Item,{children:[Object(l.jsx)("i",{className:"far fa-user"})," Orders"]})}),Object(l.jsxs)(u.a.Item,{onClick:function(){console.log("logout"),t((function(e){localStorage.removeItem("userInfo"),e({type:S}),e({type:ae}),e({type:F})})),a("/")},children:[Object(l.jsx)("i",{className:"fas fa-sign-out-alt"})," Logout"]})]}):Object(l.jsx)(b.LinkContainer,{to:"/login",children:Object(l.jsxs)(j.a.Link,{children:[Object(l.jsx)("i",{className:"fas fa-sign-in-alt"})," Login"]})}),e&&e.isAdmin&&Object(l.jsxs)(u.a,{title:"Admin",id:"admin-menu",children:[Object(l.jsx)(b.LinkContainer,{to:"/admin/userlist",children:Object(l.jsxs)(u.a.Item,{children:[Object(l.jsx)("i",{className:"fas fa-users"})," Users"]})}),Object(l.jsx)(b.LinkContainer,{to:"/admin/productlist",children:Object(l.jsxs)(u.a.Item,{children:[Object(l.jsx)("i",{className:"fas fa-images"})," Products"]})}),Object(l.jsx)(b.LinkContainer,{to:"/admin/orderlist",children:Object(l.jsxs)(u.a.Item,{children:[Object(l.jsx)("i",{className:"fas fa-tags"})," Orders"]})})]})]})})})]})})})},be=a(33),pe=a(11),he=a(143),Oe=a(89),xe=a(144),me=a(149),fe=a(150),ge=a(142),ye=function(e){var t=e.heading,a=e.variant,r=e.children;return Object(l.jsx)("div",{children:Object(l.jsxs)(ge.a,{variant:a,className:"py-2",children:[Object(l.jsx)(ge.a.Heading,{className:"mb-1",style:{fontSize:"20px"},children:t}),r]})})},ve="CARD_ADD_ITEM",Ee="CARD_REMOVE_ITEM",Se="CART_SAVE_ADDRESS",Re="CART_SAVE_PAYMENT_METHOD",Ne="CART_RESET",Ce=function(e,t){return function(){var a=Object(m.a)(x.a.mark((function a(r,c){var n,s;return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,g.a.get("/api/products/".concat(e));case 2:n=a.sent,s=n.data,r({type:ve,payload:{product:s._id,name:s.name,image:s.image,price:s.price,stockNum:s.stockNum,quantity:t}}),localStorage.setItem("cartItems",JSON.stringify(c().cart.cartItems));case 6:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},_e=function(){var e=Object(le.t)(),t=Object(le.w)().id,a=new URLSearchParams(document.location.search).get("quantity"),c=Object(h.b)();Object(r.useEffect)((function(){t&&c(Ce(t,a))}),[c,t,a]);var n=Object(h.c)((function(e){return e.cart})).cartItems;console.log("cart Items: ",n);var s=function(e){console.log("remove",e),c(function(e){return function(t,a){t({type:Ee,payload:e}),localStorage.setItem("cartItems",JSON.stringify(a().cart.cartItems))}}(e))};return Object(l.jsxs)("div",{children:[Object(l.jsxs)(pe.Link,{to:"/",style:{textDecoration:"none"},children:[Object(l.jsx)("i",{className:"fas fa-arrow-left"})," Back"]}),Object(l.jsxs)(d.a,{children:[Object(l.jsxs)(o.a,{md:8,children:[Object(l.jsx)("h1",{children:"Cart"}),0==n.length?Object(l.jsx)(ye,{heading:"Oops!",variant:"light",children:"Your cart is empty"}):Object(l.jsx)(he.a,{children:n.map((function(e){return Object(l.jsxs)(Oe.a,{className:"pb-1",children:[Object(l.jsxs)(d.a,{className:"mt-0 mb-1",children:[Object(l.jsx)(o.a,{md:2,children:Object(l.jsx)(xe.a,{src:"".concat("http://localhost:8000").concat(e.image),alt:e.name,fluid:!0,rounded:!0})}),Object(l.jsx)(o.a,{md:3,children:Object(l.jsx)(pe.Link,{to:"/product/".concat(e.product),style:{textDecoration:"none"},children:Object(l.jsx)("h6",{children:e.name})})}),Object(l.jsxs)(o.a,{md:3,children:["\xa3",e.price]}),Object(l.jsx)(o.a,{md:2,children:Object(l.jsx)(me.a.Control,{as:"select",variant:"outline-dark",style:{maxWidth:"45px"},value:e.quantity,onChange:function(t){return c(Ce(e.product,Number(t.target.value)))},size:"sm",children:Object(be.a)(Array(e.stockNum).keys()).map((function(e){return Object(l.jsx)("option",{value:e+1,children:e+1},e+1)}))})}),Object(l.jsx)(o.a,{md:1,children:Object(l.jsx)("div",{type:"button",onClick:function(){return s(e.product)},children:Object(l.jsx)("i",{className:"fas fa-trash"})})})]}),Object(l.jsx)("hr",{className:"mt-0 mb-0",style:{color:"white"}})]},e.product)}))})]}),Object(l.jsx)(o.a,{md:4,children:Object(l.jsx)(fe.a,{className:"card bg-light mb-3",children:Object(l.jsxs)(he.a,{children:[Object(l.jsx)(Oe.a,{className:"text-dark my-0",children:Object(l.jsxs)("h5",{children:[Object(l.jsx)("span",{style:{fontSize:"1.8rem"},children:"Cart total "})," (",n.reduce((function(e,t){return e+t.quantity}),0)," ","items)"]})}),Object(l.jsx)(Oe.a,{className:"text-dark pt-0",children:Object(l.jsxs)("p",{style:{fontSize:"1.5rem"},children:["\xa3",n.reduce((function(e,t){return e+t.quantity*t.price}),0).toFixed(2)]})}),Object(l.jsx)(Oe.a,{className:"d-grid gap-2 pt-1",children:Object(l.jsx)("button",{type:"button",className:"btn-dark",onClick:function(){e("/login?redirect=shipping")},disabled:0===n.length,style:{borderRadius:"8px",height:"40px"},children:"Go to Checkout"})})]})})})]})]})},Ie=function(e){var t=e.value,a=e.text,r=e.color;return Object(l.jsxs)("div",{className:"rating",children:[Object(l.jsx)("span",{children:Object(l.jsx)("i",{style:{color:r},className:t>=1?"fas fa-star":t>=.5?"fas fa-star-half-alt":"far fa-star"})}),Object(l.jsx)("span",{children:Object(l.jsx)("i",{style:{color:r},className:t>=2?"fas fa-star":t>=1.5?"fas fa-star-half-alt":"far fa-star"})}),Object(l.jsx)("span",{children:Object(l.jsx)("i",{style:{color:r},className:t>=3?"fas fa-star":t>=2.5?"fas fa-star-half-alt":"far fa-star"})}),Object(l.jsx)("span",{children:Object(l.jsx)("i",{style:{color:r},className:t>=4?"fas fa-star":t>=3.5?"fas fa-star-half-alt":"far fa-star"})}),Object(l.jsx)("span",{children:Object(l.jsx)("i",{style:{color:r},className:t>=5?"fas fa-star":t>=4.5?"fas fa-star-half-alt":"far fa-star"})}),Object(l.jsx)("span",{children:a&&a})]})},Le=function(e){var t=e.product;return Object(l.jsx)(pe.Link,{to:"/product/".concat(t._id),style:{textDecoration:"none"},children:Object(l.jsxs)(fe.a,{className:"card border-light mb-3",children:[Object(l.jsx)(fe.a.Header,{children:t.name}),Object(l.jsx)(fe.a.Img,{src:"".concat("http://localhost:8000").concat(t.image)}),Object(l.jsxs)(fe.a.Body,{children:[Object(l.jsx)(fe.a.Text,{children:Object(l.jsx)("div",{children:Object(l.jsx)(Ie,{value:t.rating,text:" ".concat(t.numReviews," reviews"),color:"#f8e825"})})}),Object(l.jsx)(fe.a.Text,{children:"\xa3".concat(t.price)})]})]})})},ke=a(145),De=function(){return Object(l.jsx)("div",{children:Object(l.jsx)(ke.a,{animation:"border",role:"status",style:{height:"50px",width:"50px",margin:"auto",display:"block"},children:Object(l.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})},Te="PRODUCT_LIST_REQUEST",we="PRODUCT_LIST_SUCCESS",Ae="PRODUCT_LIST_FAIL",Ue="PRODUCT_DETAIL_REQUEST",Pe="PRODUCT_DETAIL_SUCCESS",Fe="PRODUCT_DETAIL_FAIL",Be="PRODUCT_DELETE_REQUEST",Qe="PRODUCT_DELETE_SUCCESS",qe="PRODUCT_DELETE_FAIL",Me="PRODUCT_CREATE_REQUEST",ze="PRODUCT_CREATE_SUCCESS",Ge="PRODUCT_CREATE_FAIL",Ve="PRODUCT_CREATE_RESET",Ye="PRODUCT_UPDATE_REQUEST",Je="PRODUCT_UPDATE_SUCCESS",We="PRODUCT_UPDATE_FAIL",He="PRODUCT_UPDATE_RESET",Ke="PRODUCT_CREATE_REVIEW_REQUEST",Xe="PRODUCT_CREATE_REVIEW_SUCCESS",Ze="PRODUCT_CREATE_REVIEW_FAIL",$e="PRODUCT_CREATE_REVIEW_RESET",et=function(){return function(){var e=Object(m.a)(x.a.mark((function e(t){var a,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:Te}),e.next=4,g.a.get("/api/products/");case 4:a=e.sent,r=a.data,t({type:we,payload:r}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:Ae,payload:e.t0.response&&e.t0.response.data.detail?e.t0.response.data.detail:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},tt=function(e){return function(){var t=Object(m.a)(x.a.mark((function t(a){var r,c;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:Ue}),t.next=4,g.a.get("/api/products/".concat(e));case 4:r=t.sent,c=r.data,a({type:Pe,payload:c}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),a({type:Fe,payload:t.t0.response&&t.t0.response.data.detail?t.t0.response.data.detail:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},at=function(){var e=Object(h.b)(),t=Object(h.c)((function(e){return e.productList})),a=t.error,c=t.loading,n=t.products;return Object(r.useEffect)((function(){console.log("use effect reached"),e(et())}),[e]),Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{children:"Latest Art"}),c?Object(l.jsx)(De,{}):a?Object(l.jsx)(ye,{heading:"Error",variant:"warning",children:a}):Object(l.jsx)(d.a,{children:n.map((function(e){return Object(l.jsx)(o.a,{sm:12,md:6,lg:4,xl:3,children:Object(l.jsx)(Le,{product:e})},e._id)}))})]})},rt=a(68),ct=a(91),nt=a(90),st=function(){var e=Object(le.t)(),t=Object(le.w)().id,a=Object(r.useState)(1),c=Object(p.a)(a,2),n=c[0],s=c[1],i=Object(r.useState)(0),j=Object(p.a)(i,2),u=j[0],b=j[1],O=Object(r.useState)(""),f=Object(p.a)(O,2),y=f[0],v=f[1],E=Object(h.b)(),S=Object(h.c)((function(e){return e.productDetail})),R=S.loading,N=S.error,C=S.product,_=Object(h.c)((function(e){return e.productCreateReview})),I=_.loading,L=_.error,k=_.success,D=Object(h.c)((function(e){return e.userLogin})).userInfo;Object(r.useEffect)((function(){k&&(b(0),v(""),E({type:$e})),E(tt(t))}),[E,t,k]);return Object(l.jsxs)("div",{children:[Object(l.jsxs)(pe.Link,{to:"/",style:{textDecoration:"none"},children:[Object(l.jsx)("i",{className:"fas fa-arrow-left"})," Back"]}),R?Object(l.jsx)(De,{}):N?Object(l.jsx)(ye,{heading:"Error",variant:"warning",children:N}):Object(l.jsxs)("div",{children:[Object(l.jsxs)(d.a,{children:[Object(l.jsx)(o.a,{md:5,children:Object(l.jsx)(xe.a,{src:"".concat("http://localhost:8000").concat(C.image),alt:C.name,fluid:!0})}),Object(l.jsx)(o.a,{children:Object(l.jsxs)("div",{children:[Object(l.jsx)(Oe.a,{className:"pb-0",children:Object(l.jsx)("h4",{children:C.name})}),Object(l.jsx)(Oe.a,{className:"py-0",children:Object(l.jsx)(Ie,{value:C.rating,text:"".concat(C.numReviews," reviews"),color:"#f8e825"})}),Object(l.jsx)(Oe.a,{children:Object(l.jsxs)("h6",{children:["\xa3",C.price]})}),Object(l.jsx)(Oe.a,{className:"py-0",children:Object(l.jsx)("p",{children:C.description})})]})}),Object(l.jsx)(o.a,{md:3,children:Object(l.jsx)(fe.a,{className:"card bg-light mb-3",children:Object(l.jsxs)(he.a,{children:[Object(l.jsx)(Oe.a,{className:"text-dark",children:Object(l.jsxs)(d.a,{children:[Object(l.jsx)(o.a,{children:"Price:"}),Object(l.jsxs)(o.a,{children:["\xa3",C.price]})]})}),Object(l.jsx)("hr",{className:"my-0",style:{color:"#bac4d4"}}),Object(l.jsx)(Oe.a,{className:"text-dark",children:Object(l.jsx)(d.a,{children:C.stockNum>0?Object(l.jsx)(o.a,{className:"text-success",children:"In Stock"}):Object(l.jsx)(o.a,{className:"text-dark",children:"Out of Stock"})})}),Object(l.jsx)("hr",{className:"my-0",style:{color:"#bac4d4"}}),C.stockNum>0&&Object(l.jsx)(Oe.a,{className:"text-dark",children:Object(l.jsxs)(d.a,{children:[Object(l.jsx)(o.a,{children:"Quantity"}),Object(l.jsx)(o.a,{xs:"auto",children:Object(l.jsx)(me.a.Control,{as:"select",value:n,onChange:function(e){return s(e.target.value)},size:"sm",children:Object(be.a)(Array(C.stockNum).keys()).map((function(e){return Object(l.jsx)("option",{value:e+1,children:e+1},e+1)}))})})]})}),Object(l.jsx)(Oe.a,{className:"d-grid gap-2 pt-1",children:Object(l.jsx)("button",{type:"button",className:"btn-dark",onClick:function(){console.log("added to cart:",t),e("/cart/".concat(t,"?quantity=").concat(n))},disabled:0==C.stockNum,style:{borderRadius:"8px"},children:"Add to cart"})})]})})})]}),Object(l.jsxs)(d.a,{children:[Object(l.jsxs)(o.a,{md:6,className:"mt-4",children:[Object(l.jsx)("h5",{children:"Write a review"}),I&&Object(l.jsx)(De,{}),k&&Object(l.jsx)(ye,{variant:"success",heading:"Thank you!",children:"Review submitted"}),L&&Object(l.jsx)(ye,{variant:"danger",heading:"Error",children:L}),D?Object(l.jsxs)(me.a,{onSubmit:function(e){var a,r;e.preventDefault(),E((a=t,r={rating:u,comment:y},function(){var e=Object(m.a)(x.a.mark((function e(t,c){var n,s,i,d,o;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:Ke}),n=c(),s=n.userLogin.userInfo,i={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(s.token)}},e.next=6,g.a.post("/api/products/".concat(a,"/reviews/"),r,i);case 6:d=e.sent,o=d.data,t({type:Xe,payload:o}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:Ze,payload:e.t0.response&&e.t0.response.data.detail?e.t0.response.data.detail:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}()))},children:[Object(l.jsxs)(rt.a,{controlId:"rating",children:[Object(l.jsx)(ct.a,{children:Object(l.jsx)("strong",{children:"Rating"})}),Object(l.jsxs)(nt.a,{as:"select",value:u,onChange:function(e){return b(e.target.value)},style:{backgroundColor:"rgba(17,78,119,0.3)"},children:[Object(l.jsx)("option",{value:"",children:"Select"}),Object(l.jsx)("option",{value:"1",children:"1 - Very Bad"}),Object(l.jsx)("option",{value:"2",children:"2 - Bad"}),Object(l.jsx)("option",{value:"3",children:"3 - Average"}),Object(l.jsx)("option",{value:"4",children:"4 - Good"}),Object(l.jsx)("option",{value:"5",children:"5 - Very Good"})]})]}),Object(l.jsxs)(rt.a,{controlId:"comment",children:[Object(l.jsx)(ct.a,{className:"mt-2",children:Object(l.jsx)("strong",{children:"Comment"})}),Object(l.jsx)(nt.a,{as:"textarea",value:y,onChange:function(e){return v(e.target.value)}})]}),Object(l.jsx)("button",{type:"submit",className:"btn-dark mt-2",disabled:I,style:{borderRadius:"8px",width:"100px"},children:"Submit"})]}):Object(l.jsxs)(ye,{variant:"info",children:["Please ",Object(l.jsx)(pe.Link,{to:"/login",children:"login"})," to write a review"]})]}),Object(l.jsxs)(o.a,{md:6,className:"mt-4",children:[Object(l.jsx)("h5",{children:"Reviews"}),0==C.reviews.length&&Object(l.jsx)("p",{style:{color:"#b2b7bf"},children:"No reviews yet"}),Object(l.jsx)("div",{children:C.reviews.map((function(e){return Object(l.jsxs)(fe.a,{className:"py-2 px-2 mb-2",children:[Object(l.jsxs)("p",{className:"mb-0 pb-0",children:[Object(l.jsx)("strong",{style:{fontSize:"18px"},children:e.name}),Object(l.jsxs)("span",{style:{color:"#b2b7bf"},children:[" ","| ",e.createdAt.substring(0,10)]})]}),Object(l.jsx)(Ie,{value:e.rating,color:"#f8e825"}),Object(l.jsx)("p",{className:"mb-0",children:e.comment})]},e._id)}))})]})]})]})]})},it=a(88),dt=function(e){var t=e.children;return Object(l.jsx)(i.a,{children:Object(l.jsx)(d.a,{className:"justify-content-md-center",children:Object(l.jsx)(o.a,{xs:12,md:6,children:t})})})},ot=function(){var e=Object(le.t)(),t=Object(r.useState)(""),a=Object(p.a)(t,2),c=a[0],n=a[1],s=Object(r.useState)(""),i=Object(p.a)(s,2),j=i[0],u=i[1],b=Object(h.b)(),O=new URLSearchParams(document.location.search),f=O.has("redirect")?O.get("redirect"):"/",S=Object(h.c)((function(e){return e.userLogin})),R=S.loading,N=S.error,C=S.userInfo;Object(r.useEffect)((function(){console.log("first instance",f),C&&(e("".concat(f)),console.log("REDIRECT - ",f))}),[e,f,C]);return Object(l.jsxs)(dt,{children:[Object(l.jsx)("h2",{children:"Log in"}),N&&Object(l.jsx)(ye,{heading:"Error",variant:"danger",children:"Please enter correct details"}),R&&Object(l.jsx)(De,{}),Object(l.jsxs)(me.a,{onSubmit:function(e){e.preventDefault(),b(function(e,t){return function(){var a=Object(m.a)(x.a.mark((function a(r){var c,n,s;return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r({type:y}),c={headers:{"Content-type":"application/json"}},a.next=5,g.a.post("/api/users/login/",{username:e,password:t},c);case 5:n=a.sent,s=n.data,r({type:v,payload:s}),localStorage.setItem("userInfo",JSON.stringify(s)),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),r({type:E,payload:a.t0.response&&a.t0.response.data.detail?a.t0.response.data.detail:a.t0.message});case 14:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e){return a.apply(this,arguments)}}()}(c,j))},children:[Object(l.jsxs)(rt.a,{controlId:"email",children:[Object(l.jsx)(ct.a,{className:"mt-2",children:"Email"}),Object(l.jsx)(nt.a,{type:"email",placeholder:"example@email.com",value:c,onChange:function(e){return n(e.target.value)}})]}),Object(l.jsxs)(rt.a,{controlId:"password",children:[Object(l.jsx)(ct.a,{className:"mt-2",children:"Password"}),Object(l.jsx)(nt.a,{type:"password",placeholder:"password",value:j,onChange:function(e){return u(e.target.value)}})]}),Object(l.jsx)("div",{className:"d-grid gap-2",children:Object(l.jsx)(it.a,{type:"submit",className:"btn btn-dark btn-sm mt-2",children:"Log in"})})]}),Object(l.jsx)(d.a,{className:"py-3",children:Object(l.jsxs)(o.a,{children:["New here?"," ",Object(l.jsx)(pe.Link,{to:f?"/register?redirect=".concat(f):"/register",children:"Register"})]})})]})},lt=function(){var e=Object(le.t)(),t=Object(r.useState)(""),a=Object(p.a)(t,2),c=a[0],n=a[1],s=Object(r.useState)(""),i=Object(p.a)(s,2),j=i[0],u=i[1],b=Object(r.useState)(""),O=Object(p.a)(b,2),f=O[0],y=O[1],E=Object(r.useState)(""),S=Object(p.a)(E,2),_=S[0],I=S[1],L=Object(r.useState)(""),k=Object(p.a)(L,2),D=k[0],T=k[1],w=Object(h.b)(),A=new URLSearchParams(document.location.search),U=A.has("redirect")?A.get("redirect"):"/",P=Object(h.c)((function(e){return e.userRegister})),F=P.loading,B=P.error,Q=P.userInfo;Object(r.useEffect)((function(){Q&&e("".concat(U))}),[e,U,Q]);return Object(l.jsxs)(dt,{children:[Object(l.jsx)("h2",{children:"Register"}),D&&Object(l.jsx)(ye,{heading:"Oops!",variant:"danger",children:D}),B&&Object(l.jsx)(ye,{heading:"Error",variant:"danger",children:B}),F&&Object(l.jsx)(De,{}),Object(l.jsxs)(me.a,{onSubmit:function(e){e.preventDefault(),f!==_?T("Passwords do not match"):w(function(e,t,a){return function(){var r=Object(m.a)(x.a.mark((function r(c){var n,s,i;return x.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,c({type:R}),n={headers:{"Content-type":"application/json"}},r.next=5,g.a.post("/api/users/register/",{name:e,email:t,password:a},n);case 5:s=r.sent,i=s.data,c({type:N,payload:i}),c({type:v,payload:i}),localStorage.setItem("userInfo",JSON.stringify(i)),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(0),c({type:C,payload:r.t0.response&&r.t0.response.data.detail?r.t0.response.data.detail:r.t0.message});case 15:case"end":return r.stop()}}),r,null,[[0,12]])})));return function(e){return r.apply(this,arguments)}}()}(c,j,f))},children:[Object(l.jsxs)(rt.a,{controlId:"name",children:[Object(l.jsx)(ct.a,{className:"mt-1",children:"Name"}),Object(l.jsx)(nt.a,{required:!0,type:"name",placeholder:"Full name",value:c,onChange:function(e){return n(e.target.value)}})]}),Object(l.jsxs)(rt.a,{controlId:"email",children:[Object(l.jsx)(ct.a,{className:"mt-2",children:"Email"}),Object(l.jsx)(nt.a,{required:!0,type:"email",placeholder:"example@email.com",value:j,onChange:function(e){return u(e.target.value)}})]}),Object(l.jsxs)(rt.a,{controlId:"password",children:[Object(l.jsx)(ct.a,{className:"mt-2",children:"Password"}),Object(l.jsx)(nt.a,{required:!0,type:"password",placeholder:"password",value:f,onChange:function(e){return y(e.target.value)}})]}),Object(l.jsxs)(rt.a,{controlId:"passwordConf",children:[Object(l.jsx)(ct.a,{className:"mt-2",children:"Confirm password"}),Object(l.jsx)(nt.a,{required:!0,type:"password",placeholder:"password",value:_,onChange:function(e){return I(e.target.value)}})]}),Object(l.jsx)("div",{className:"d-grid gap-2",children:Object(l.jsx)(it.a,{type:"submit",className:"btn btn-dark btn-sm mt-2",children:"Register"})})]}),Object(l.jsx)(d.a,{className:"py-3",children:Object(l.jsxs)(o.a,{children:["Already registered?"," ",Object(l.jsx)(pe.Link,{to:U?"/login?redirect=".concat(U):"/login",children:"Log in"})]})})]})},jt=function(){},ut=a(84),bt=function(e){var t=e.step1,a=e.step2,r=e.step3,c=e.step4;return Object(l.jsxs)(j.a,{className:"justify-content-center mb-2",style:{minWidth:"400px"},children:[Object(l.jsx)(ut.a,{children:t?Object(l.jsx)(b.LinkContainer,{to:"/login",children:Object(l.jsx)(j.a.Link,{className:"px-2",children:"Login"})}):Object(l.jsx)(j.a.Link,{className:"px-2",disabled:!0,children:"Login"})}),Object(l.jsx)(ut.a,{children:a?Object(l.jsx)(b.LinkContainer,{to:"/shipping",children:Object(l.jsx)(j.a.Link,{className:"px-2",children:"Shipping"})}):Object(l.jsx)(j.a.Link,{className:"px-2",disabled:!0,children:"Shipping"})}),Object(l.jsx)(ut.a,{children:r?Object(l.jsx)(b.LinkContainer,{to:"/payment",children:Object(l.jsx)(j.a.Link,{className:"px-2",children:"Payment"})}):Object(l.jsx)(j.a.Link,{className:"px-2",disabled:!0,children:"Payment"})}),Object(l.jsx)(ut.a,{children:c?Object(l.jsx)(b.LinkContainer,{to:"/confirm",children:Object(l.jsx)(j.a.Link,{className:"px-2",children:"Confirm order"})}):Object(l.jsx)(j.a.Link,{className:"px-2",disabled:!0,children:"Confirm order"})})]})},pt=function(){var e=Object(le.t)(),t=Object(h.c)((function(e){return e.cart})).shippingAddress,a=Object(h.b)(),c=Object(r.useState)(t.address),n=Object(p.a)(c,2),s=n[0],i=n[1],d=Object(r.useState)(t.postcode),o=Object(p.a)(d,2),j=o[0],u=o[1],b=Object(r.useState)(t.city),O=Object(p.a)(b,2),x=O[0],m=O[1],f=Object(r.useState)(t.country),g=Object(p.a)(f,2),y=g[0],v=g[1];return Object(l.jsxs)(dt,{children:[Object(l.jsx)(bt,{step1:!0,step2:!0}),Object(l.jsx)("h1",{children:"Order details"}),Object(l.jsx)("h4",{children:"Shipping address:"}),Object(l.jsxs)(me.a,{onSubmit:function(t){var r;t.preventDefault(),a((r={address:s,postcode:j,city:x,country:y},function(e){e({type:Se,payload:r}),localStorage.setItem("shippingAddress",JSON.stringify(r))})),e("/payment")},children:[Object(l.jsxs)(rt.a,{controlId:"address",children:[Object(l.jsx)(ct.a,{className:"mt-1",children:"Address"}),Object(l.jsx)(nt.a,{required:!0,type:"text",placeholder:"Address",value:s,onChange:function(e){return i(e.target.value)}})]}),Object(l.jsxs)(rt.a,{controlId:"postcode",children:[Object(l.jsx)(ct.a,{className:"mt-1",children:"Postcode"}),Object(l.jsx)(nt.a,{required:!0,type:"text",placeholder:"Postcode",value:j,onChange:function(e){return u(e.target.value)}}),Object(l.jsxs)(rt.a,{controlId:"city",children:[Object(l.jsx)(ct.a,{className:"mt-1",children:"City"}),Object(l.jsx)(nt.a,{required:!0,type:"text",placeholder:"City",value:x,onChange:function(e){return m(e.target.value)}}),Object(l.jsxs)(rt.a,{controlId:"country",children:[Object(l.jsx)(ct.a,{className:"mt-1",children:"Country"}),Object(l.jsx)(nt.a,{required:!0,type:"text",placeholder:"Country",value:y,onChange:function(e){return v(e.target.value)}})]})]})]}),Object(l.jsx)("div",{className:"d-grid gap-2",children:Object(l.jsx)(it.a,{type:"submit",className:"btn btn-dark btn-sm mt-2",children:"Continue"})})]})]})},ht=a(50),Ot=function(){var e=Object(le.t)(),t=(Object(h.c)((function(e){return e.cart})).shippingAddress,Object(h.b)()),a=Object(r.useState)("PayPal"),c=Object(p.a)(a,2),n=c[0],s=c[1];return Object(l.jsxs)(dt,{children:[Object(l.jsx)(bt,{step1:!0,step2:!0,step3:!0}),Object(l.jsx)("h1",{children:"Order details"}),Object(l.jsx)("h4",{children:"Payment details"}),Object(l.jsxs)(me.a,{onSubmit:function(a){var r;a.preventDefault(),t((r=n,function(e){e({type:Re,payload:r}),localStorage.setItem("paymentMethod",JSON.stringify(r))})),e("/confirmorder")},children:[Object(l.jsxs)(rt.a,{children:[Object(l.jsx)(ct.a,{className:"mt-2",as:"legend",children:Object(l.jsx)("p",{style:{fontSize:"16px"},children:"Select a payment method"})}),Object(l.jsxs)(o.a,{children:[Object(l.jsx)(d.a,{children:Object(l.jsxs)("div",{className:"d-flex flex-row align-items-center gap-2",children:[Object(l.jsx)(ht.a,{type:"radio",label:"PayPal",id:"PayPal",name:"payment",checked:!0,onChange:function(e){return s(e.target.value)}}),Object(l.jsx)("i",{className:"fab fa-paypal"})]})}),Object(l.jsx)(d.a,{children:Object(l.jsxs)("div",{className:"d-flex flex-row align-items-center gap-2",children:[Object(l.jsx)(ht.a,{disabled:!0,type:"radio",label:"Visa Debit",id:"VisaDebit",name:"payment",onChange:function(e){return s(e.target.value)}}),Object(l.jsx)("i",{className:"fab fa-cc-visa"})]})}),Object(l.jsx)(d.a,{children:Object(l.jsxs)("div",{className:"d-flex flex-row align-items-center gap-2",children:[Object(l.jsx)(ht.a,{disabled:!0,type:"radio",label:"ApplePay",id:"Apple Pay",name:"payment",onChange:function(e){return s(e.target.value)}}),Object(l.jsx)("i",{className:"fab fa-cc-apple-pay"})]})})]})]}),Object(l.jsx)("div",{className:"d-grid gap-2",children:Object(l.jsx)(it.a,{type:"submit",className:"btn btn-dark btn-sm mt-3",children:"Continue"})})]})]})},xt=function(){var e=Object(le.t)(),t=Object(h.c)((function(e){return e.orderCreate})),a=t.success,c=t.order,n=t.error,s=Object(h.b)(),i=Object(h.c)((function(e){return e.cart}));i.totalPrice=i.cartItems.reduce((function(e,t){return e+t.price*t.quantity}),0).toFixed(2);var j=JSON.parse(localStorage.getItem("paymentMethod"));console.log("PAYPAY : ",j),Object(r.useEffect)((function(){a&&(e("/order/".concat(c._id)),s({type:V}))}),[a,e]);return Object(l.jsxs)("div",{children:[Object(l.jsx)(bt,{step1:!0,step2:!0,step3:!0,step4:!0}),Object(l.jsx)("h3",{children:"Confirm Order"}),Object(l.jsxs)(d.a,{children:[Object(l.jsxs)(o.a,{md:8,children:[Object(l.jsx)(he.a,{children:Object(l.jsxs)(Oe.a,{children:[Object(l.jsx)("h5",{children:"Shipping Address"}),Object(l.jsx)("div",{className:"d-flex flex-column gap-0",children:Object(l.jsxs)("p",{children:[i.shippingAddress.address,Object(l.jsx)("br",{}),i.shippingAddress.postcode,Object(l.jsx)("br",{}),i.shippingAddress.city,Object(l.jsx)("br",{}),i.shippingAddress.country]})})]})}),Object(l.jsx)(he.a,{className:"mt-2",variant:"flush",children:Object(l.jsxs)(Oe.a,{children:[Object(l.jsx)("h5",{children:"Payment Method"}),Object(l.jsx)("div",{className:"d-flex flex-column gap-0",children:Object(l.jsxs)("p",{children:[Object(l.jsx)("i",{className:"fab fa-paypal"}),i.paymentMethod]})})]})}),Object(l.jsx)(he.a,{className:"mt-2",children:Object(l.jsxs)(Oe.a,{children:[Object(l.jsx)("h5",{children:"Order Items"}),0===i.cartItems.length?Object(l.jsx)(ye,{heading:"Oops!",variant:"warning",children:"Your cart is empty"}):Object(l.jsx)(he.a,{children:i.cartItems.map((function(e,t){return Object(l.jsxs)(Oe.a,{children:[Object(l.jsxs)(d.a,{children:[Object(l.jsx)(o.a,{md:2,children:Object(l.jsx)(xe.a,{src:"".concat("http://localhost:8000").concat(e.image),alt:e.name,fluid:!0,rounded:!0})}),Object(l.jsx)(o.a,{md:7,children:Object(l.jsx)(pe.Link,{to:"/product/".concat(e.product),style:{textDecoration:"none"},children:Object(l.jsx)("h6",{children:e.name})})}),Object(l.jsxs)(o.a,{md:3,children:[e.quantity," x \xa3",e.price]})]}),Object(l.jsx)("hr",{className:"mt-0 mb-0",style:{color:"white"}})]},t)}))})]})})]}),Object(l.jsx)(o.a,{md:4,children:Object(l.jsx)(fe.a,{className:"card bg-light mb-3",children:Object(l.jsxs)(he.a,{children:[Object(l.jsx)(Oe.a,{className:"text-dark my-0",children:Object(l.jsx)("h3",{children:"Your order"})}),Object(l.jsx)(Oe.a,{className:"text-dark my-0 py-0",children:Object(l.jsx)("h6",{children:"Total price:"})}),Object(l.jsx)(Oe.a,{className:"text-dark pt-0",children:Object(l.jsxs)("h1",{children:["\xa3",i.totalPrice]})}),Object(l.jsx)(Oe.a,{children:n&&Object(l.jsx)(ye,{variant:"danger",children:n})}),Object(l.jsx)(Oe.a,{className:"d-grid gap-2 pt-1",children:Object(l.jsx)("button",{type:"button",onClick:function(){console.log("confirmed order"),s(function(e){return function(){var t=Object(m.a)(x.a.mark((function t(a,r){var c,n,s,i,d;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:M}),c=r(),n=c.userLogin.userInfo,s={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(n.token)}},t.next=6,g.a.post("/api/orders/add/",e,s);case 6:i=t.sent,d=i.data,a({type:z,payload:d}),a({type:Ne,payload:d}),localStorage.removeItem("cartItems"),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),a({type:G,payload:t.t0.response&&t.t0.response.data.detail?t.t0.response.data.detail:t.t0.message});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,a){return t.apply(this,arguments)}}()}({orderItems:i.cartItems,shippingAddress:i.shippingAddress,paymentMethod:i.paymentMethod,totalPrice:i.totalPrice}))},className:"btn-dark",style:{borderRadius:"8px",height:"40px"},children:"Confirm Order"})})]})})})]})]})},mt=a(92),ft=function(){var e=Object(r.useState)(!1),t=Object(p.a)(e,2),a=t[0],c=t[1],n=Object(le.w)().id,s=Object(h.b)(),i=(Object(le.t)(),Object(h.c)((function(e){return e.cart}))),j=Object(h.c)((function(e){return e.orderDetails})),u=j.loading,b=j.order,O=j.error,f=Object(h.c)((function(e){return e.orderPay})),y=f.loading,v=f.success,E=Object(h.c)((function(e){return e.orderDeliver})),S=(E.loading,E.success);Object(h.c)((function(e){return e.userLogin})).userInfo;u||O||(b.totalPrice=b.orderItems.reduce((function(e,t){return e+t.price*t.quantity}),0).toFixed(2));Object(r.useEffect)((function(){!b||b._id!==Number(n)||v||S?(s({type:Z}),s({type:oe}),s(function(e){return function(){var t=Object(m.a)(x.a.mark((function t(a,r){var c,n,s,i,d;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:Y}),c=r(),n=c.userLogin.userInfo,s={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(n.token)}},t.next=6,g.a.get("/api/orders/".concat(e,"/"),s);case 6:i=t.sent,d=i.data,a({type:J,payload:d}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:W,payload:t.t0.response&&t.t0.response.data.detail?t.t0.response.data.detail:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()}(n))):b.isPaid||(window.paypal?c(!0):function(){var e=document.createElement("script");e.type="text/javascript",e.src="https://www.paypal.com/sdk/js?client-id=ARSSh0ejARGDHtbeqWdJynonWBqCbdlaptRiFfaqtVU7kA_ApT6-kclfN-ubd6xvDRSWhteaXo3K1Fvp",e.async=!0,e.onload=function(){c(!0)},document.body.appendChild(e)}())}),[b,n,s,v,S]);return u?Object(l.jsx)(De,{}):O?Object(l.jsx)(ye,{variant:"danger",children:O}):Object(l.jsxs)("div",{children:[Object(l.jsx)("h3",{children:"Order Summary"}),Object(l.jsxs)(d.a,{children:[Object(l.jsxs)(o.a,{md:8,children:[Object(l.jsx)(he.a,{children:Object(l.jsxs)(Oe.a,{children:[Object(l.jsx)("h5",{children:"Shipping Address"}),Object(l.jsx)("div",{className:"d-flex flex-column gap-0",children:Object(l.jsxs)("p",{children:[i.shippingAddress.address,Object(l.jsx)("br",{}),i.shippingAddress.postcode,Object(l.jsx)("br",{}),i.shippingAddress.city,Object(l.jsx)("br",{}),i.shippingAddress.country]})})]})}),Object(l.jsx)(he.a,{className:"mt-2",variant:"flush",children:Object(l.jsxs)(Oe.a,{children:[Object(l.jsx)("h5",{children:"Payment Method"}),Object(l.jsx)("div",{className:"d-flex flex-column gap-0",children:Object(l.jsxs)("p",{children:[Object(l.jsx)("i",{className:"fab fa-paypal"}),b.paymentMethod]})})]})}),Object(l.jsx)(he.a,{className:"mt-2",children:Object(l.jsxs)(Oe.a,{children:[Object(l.jsx)("h5",{children:"Order Items"}),0===b.orderItems.length?Object(l.jsx)(ye,{heading:"Oops!",variant:"warning",children:"Your order is empty"}):Object(l.jsx)(he.a,{children:b.orderItems.map((function(e,t){return Object(l.jsxs)(Oe.a,{children:[Object(l.jsxs)(d.a,{children:[Object(l.jsx)(o.a,{md:2,children:Object(l.jsx)(xe.a,{src:"".concat("http://localhost:8000").concat(e.image),alt:e.name,fluid:!0,rounded:!0})}),Object(l.jsx)(o.a,{md:7,children:Object(l.jsx)(pe.Link,{to:"/product/".concat(e.product),style:{textDecoration:"none"},children:Object(l.jsx)("h6",{children:e.name})})}),Object(l.jsxs)(o.a,{md:3,children:[e.quantity," x \xa3",e.price]})]}),Object(l.jsx)("hr",{className:"mt-0 mb-0",style:{color:"white"}})]},t)}))})]})})]}),Object(l.jsxs)(o.a,{md:4,children:[Object(l.jsx)(fe.a,{className:"card bg-light mb-3",children:Object(l.jsxs)(he.a,{children:[Object(l.jsx)(Oe.a,{className:"text-dark my-0",children:Object(l.jsx)("h3",{children:"Your order"})}),Object(l.jsx)(Oe.a,{className:"text-dark my-0 py-0",children:Object(l.jsx)("h6",{children:"Total price:"})}),Object(l.jsx)(Oe.a,{className:"text-dark pt-0",children:Object(l.jsxs)("h1",{children:["\xa3",b.totalPrice]})}),!b.isPaid&&Object(l.jsxs)(Oe.a,{children:[y&&Object(l.jsx)(De,{}),a?Object(l.jsx)(mt.PayPalButton,{amount:b.totalPrice,onSuccess:function(e){s(function(e,t){return function(){var a=Object(m.a)(x.a.mark((function a(r,c){var n,s,i,d,o;return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r({type:H}),n=c(),s=n.userLogin.userInfo,i={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(s.token)}},a.next=6,g.a.put("/api/orders/".concat(e,"/pay/"),t,i);case 6:d=a.sent,o=d.data,r({type:K,payload:o}),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),r({type:X,payload:a.t0.response&&a.t0.response.data.detail?a.t0.response.data.detail:a.t0.message});case 14:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e,t){return a.apply(this,arguments)}}()}(n,e))}}):Object(l.jsx)(De,{})]})]})}),Object(l.jsx)(Oe.a,{className:"py-0 px-0",children:b.isPaid?Object(l.jsxs)(ye,{heading:"Payment status",variant:"success",children:["Paid on ",b.paidAt.substring(0,10)]}):Object(l.jsx)(ye,{heading:"Payment status",variant:"warning",children:"Not yet paid"})}),Object(l.jsx)(Oe.a,{className:"py-0 px-0",children:b.isDelivered?Object(l.jsxs)(ye,{heading:"Delivery status",variant:"success",children:["Delivered on ",b.deliveredAt.substring(0,10)]}):Object(l.jsx)(ye,{heading:"Delivery status",variant:"warning",children:"Not yet delivered"})})]})]})]})},gt=a(146),yt=function(){var e=Object(h.b)(),t=Object(h.c)((function(e){return e.userList})),a=t.loading,c=t.error,n=t.users,s=Object(h.c)((function(e){return e.userDelete})).success;Object(r.useEffect)((function(){e(function(){var e=Object(m.a)(x.a.mark((function e(t,a){var r,c,n,s,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:A}),r=a(),c=r.userLogin.userInfo,n={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(c.token)}},e.next=6,g.a.get("/api/users/",n);case 6:s=e.sent,i=s.data,t({type:U,payload:i}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:P,payload:e.t0.response&&e.t0.response.data.detail?e.t0.response.data.detail:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}())}),[e,s]);var i=function(t){window.confirm("Delete user?")&&e(function(e){return function(){var t=Object(m.a)(x.a.mark((function t(a,r){var c,n,s,i,d;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:B}),c=r(),n=c.userLogin.userInfo,s={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(n.token)}},t.next=6,g.a.delete("/api/users/delete/".concat(e,"/"),s);case 6:i=t.sent,d=i.data,a({type:Q,payload:d}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:q,payload:t.t0.response&&t.t0.response.data.detail?t.t0.response.data.detail:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()}(t))};return Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{children:"Users"}),a?Object(l.jsx)(De,{}):c?Object(l.jsx)(ye,{variant:"danger",heading:"Error",children:c}):Object(l.jsxs)(gt.a,{className:"table-sm table-striped table-hover table-bordered",children:[Object(l.jsxs)("thead",{children:[Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{children:"ID"}),Object(l.jsx)("th",{children:"Name"}),Object(l.jsx)("th",{children:"Email"}),Object(l.jsx)("th",{children:"Admin"})]}),Object(l.jsx)("th",{})]}),Object(l.jsx)("tbody",{children:n.map((function(e){return Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:e.id}),Object(l.jsx)("td",{children:e.name}),Object(l.jsx)("td",{children:e.email}),Object(l.jsx)("td",{children:e.isAdmin?Object(l.jsx)("i",{className:"fas fa-check"}):Object(l.jsx)("i",{className:"fas fa-times"})}),Object(l.jsx)("td",{children:Object(l.jsx)(it.a,{className:"btn-sm btn-secondary",onClick:function(){return i(e.id)},children:Object(l.jsx)("i",{className:"fas fa-trash"})})})]},e.id)}))})]})]})},vt=function(){var e=Object(le.t)(),t=Object(h.b)(),a=Object(h.c)((function(e){return e.productList})),c=a.loading,n=a.error,s=a.products,i=Object(h.c)((function(e){return e.productDelete})),j=i.loading,u=i.error,p=i.success,O=Object(h.c)((function(e){return e.productCreate})),f=O.loading,y=O.error,v=O.success,E=O.product;Object(r.useEffect)((function(){t({type:Ve}),v?e("/admin/product/".concat(E._id,"/edit")):t(et())}),[t,p,v,E]);var S=function(e){window.confirm("Delete product?")&&t(function(e){return function(){var t=Object(m.a)(x.a.mark((function t(a,r){var c,n,s;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:Be}),c=r(),n=c.userLogin.userInfo,s={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(n.token)}},t.next=6,g.a.delete("/api/products/delete/".concat(e),s);case 6:t.sent.data,a({type:Qe}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:qe,payload:t.t0.response&&t.t0.response.data.detail?t.t0.response.data.detail:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()}(e))};return Object(l.jsxs)("div",{children:[Object(l.jsxs)(d.a,{children:[Object(l.jsx)(o.a,{children:Object(l.jsx)("h1",{children:"Products"})}),Object(l.jsx)(o.a,{style:{display:"flex",justifyContent:"flex-end"},className:"text-right",children:Object(l.jsxs)(it.a,{className:"btn-sm btn-secondary",onClick:function(e){console.log("added product"),t(function(){var e=Object(m.a)(x.a.mark((function e(t,a){var r,c,n,s,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:Me}),r=a(),c=r.userLogin.userInfo,n={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(c.token)}},e.next=6,g.a.post("/api/products/create/",{},n);case 6:s=e.sent,i=s.data,t({type:ze,payload:i}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:Ge,payload:e.t0.response&&e.t0.response.data.detail?e.t0.response.data.detail:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}())},style:{height:"35px",marginTop:"10px"},children:[Object(l.jsx)("i",{className:"fas fa-plus",children:" "})," Add Product"]})})]}),j&&Object(l.jsx)(De,{}),u&&Object(l.jsx)(ye,{variant:"danger",heading:"Error",children:u}),f&&Object(l.jsx)(De,{}),y&&Object(l.jsx)(ye,{variant:"danger",heading:"Error",children:y}),c?Object(l.jsx)(De,{}):n?Object(l.jsx)(ye,{variant:"danger",heading:"Error",children:n}):Object(l.jsxs)(gt.a,{className:"table-sm table-striped table-hover table-bordered",children:[Object(l.jsxs)("thead",{children:[Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{children:"ID"}),Object(l.jsx)("th",{children:"Name"}),Object(l.jsx)("th",{children:"Price"}),Object(l.jsx)("th",{children:"Quantity"})]}),Object(l.jsx)("th",{})]}),Object(l.jsx)("tbody",{children:s.map((function(e){return Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:e._id}),Object(l.jsx)("td",{children:e.name}),Object(l.jsxs)("td",{children:["\xa3",e.price]}),Object(l.jsx)("td",{children:e.stockNum}),Object(l.jsxs)("td",{children:[Object(l.jsx)(b.LinkContainer,{to:"/admin/product/".concat(e._id,"/edit"),style:{cursor:"pointer",marginRight:"10px"},children:Object(l.jsx)(it.a,{className:"btn-sm btn-secondary",children:Object(l.jsx)("i",{className:"fas fa-edit"})})}),Object(l.jsx)(it.a,{className:"btn-sm btn-secondary",onClick:function(){return S(e._id)},children:Object(l.jsx)("i",{className:"fas fa-trash"})})]})]},e._id)}))})]})]})},Et=function(){var e=Object(le.w)().id,t=Object(le.t)(),a=Object(r.useState)(""),c=Object(p.a)(a,2),n=c[0],s=c[1],i=Object(r.useState)(0),d=Object(p.a)(i,2),o=d[0],j=d[1],u=Object(r.useState)(""),b=Object(p.a)(u,2),O=b[0],f=b[1],y=Object(r.useState)(0),v=Object(p.a)(y,2),E=v[0],S=v[1],R=Object(r.useState)(""),N=Object(p.a)(R,2),C=N[0],_=N[1],I=Object(r.useState)(!1),L=Object(p.a)(I,2),k=L[0],D=L[1],T=Object(h.b)(),w=Object(h.c)((function(e){return e.productDetail})),A=w.product,U=(w.error,w.loading,Object(h.c)((function(e){return e.productUpdate}))),P=U.success,F=U.error,B=U.loading;Object(r.useEffect)((function(){P?(T({type:He}),t("/admin/productlist")):A.name&&A._id===Number(e)?(s(A.name),j(A.price),f(A.image),S(A.stockNum),_(A.description)):T(tt(e))}),[A,e,T,P,t]);var Q=function(){var t=Object(m.a)(x.a.mark((function t(a){var r,c,n,s,i;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.target.files[0],(c=new FormData).append("image",r),c.append("product_id",e),D(!0),t.prev=5,n={headers:{"Content-Type":"multipart/form-data"}},t.next=9,g.a.post("/api/products/upload/",c,n);case 9:s=t.sent,i=s.data,f(i),D(!1),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(5),D(!1);case 18:case"end":return t.stop()}}),t,null,[[5,15]])})));return function(e){return t.apply(this,arguments)}}();return Object(l.jsxs)("div",{children:[Object(l.jsxs)(pe.Link,{to:"/admin/productlist",style:{textDecoration:"none"},children:[Object(l.jsx)("i",{className:"fas fa-arrow-left"})," Back"]}),Object(l.jsxs)(dt,{children:[Object(l.jsx)("h1",{children:"Edit Product"}),B&&Object(l.jsx)(De,{}),F&&Object(l.jsx)(ye,{variant:"danger",heading:"Error",children:F}),Object(l.jsxs)(me.a,{onSubmit:function(t){t.preventDefault(),console.log("product updated"),T(function(e){return function(){var t=Object(m.a)(x.a.mark((function t(a,r){var c,n,s,i,d;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:Ye}),c=r(),n=c.userLogin.userInfo,s={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(n.token)}},t.next=6,g.a.put("/api/products/update/".concat(e._id,"/"),e,s);case 6:i=t.sent,d=i.data,a({type:Je,payload:d}),a({type:Pe,payload:d}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),a({type:We,payload:t.t0.response&&t.t0.response.data.detail?t.t0.response.data.detail:t.t0.message});case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,a){return t.apply(this,arguments)}}()}({_id:e,name:n,price:o,image:O,description:C,stockNum:E}))},children:[Object(l.jsxs)(me.a.Group,{controlId:"name",children:[Object(l.jsx)(me.a.Label,{className:"mt-2",children:"Name"}),Object(l.jsx)(me.a.Control,{type:"name",placeholder:"Product name",value:n,onChange:function(e){return s(e.target.value)}})]}),Object(l.jsxs)(me.a.Group,{controlId:"price",children:[Object(l.jsx)(me.a.Label,{className:"mt-2",children:"Price"}),Object(l.jsx)(me.a.Control,{type:"number",placeholder:"Product price",value:o,onChange:function(e){return j(e.target.value)}})]}),Object(l.jsxs)(me.a.Group,{controlId:"image",children:[Object(l.jsx)(me.a.Label,{className:"mt-2",children:"Image"}),Object(l.jsx)(me.a.Control,{type:"text",placeholder:"Product image",value:O,onChange:function(e){return f(e.target.value)}})]}),Object(l.jsxs)(me.a.Group,{controlId:"formFile",children:[Object(l.jsx)(me.a.Label,{className:"mt-2",children:"Upload"}),Object(l.jsx)(me.a.Control,{type:"file",onChange:Q})]}),Object(l.jsxs)(me.a.Group,{controlId:"stockNum",children:[Object(l.jsx)(me.a.Label,{className:"mt-2",children:"Quantity in stock"}),Object(l.jsx)(me.a.Control,{type:"number",placeholder:"Quantity",value:E,onChange:function(e){return S(e.target.value)}})]}),Object(l.jsxs)(me.a.Group,{controlId:"description",children:[Object(l.jsx)(me.a.Label,{className:"mt-2",children:"Description"}),Object(l.jsx)(me.a.Control,{type:"text",placeholder:"Enter description",value:C,onChange:function(e){return _(e.target.value)}}),k&&Object(l.jsx)(De,{})]}),Object(l.jsx)("div",{className:"d-grid gap-2",children:Object(l.jsx)(it.a,{type:"submit",className:"btn btn-dark btn-sm mt-2",children:"Update"})})]})]})]})},St=function(){var e=Object(h.b)(),t=Object(h.c)((function(e){return e.orderList})),a=t.loading,c=t.error,n=t.orders;return Object(r.useEffect)((function(){e(function(){var e=Object(m.a)(x.a.mark((function e(t,a){var r,c,n,s,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:re}),r=a(),c=r.userLogin.userInfo,n={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(c.token)}},e.next=6,g.a.get("/api/orders/",n);case 6:s=e.sent,i=s.data,t({type:ce,payload:i}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:ne,payload:e.t0.response&&e.t0.response.data.detail?e.t0.response.data.detail:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}())}),[e]),Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{children:"Orders"}),a?Object(l.jsx)(De,{}):c?Object(l.jsx)(ye,{variant:"danger",heading:"Error",children:c}):Object(l.jsxs)(gt.a,{className:"table-sm table-striped table-hover table-bordered",children:[Object(l.jsxs)("thead",{children:[Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{children:"ID"}),Object(l.jsx)("th",{children:"User"}),Object(l.jsx)("th",{children:"Date"}),Object(l.jsx)("th",{children:"Total Price"}),Object(l.jsx)("th",{children:"Payment Status"}),Object(l.jsx)("th",{children:"Delivery Status"})]}),Object(l.jsx)("th",{})]}),Object(l.jsx)("tbody",{children:n.map((function(e){return Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:e._id}),Object(l.jsx)("td",{children:e.user&&e.user.name}),Object(l.jsx)("td",{children:e.createdAt.substring(0,10)}),Object(l.jsxs)("td",{children:["\xa3",e.totalPrice]}),Object(l.jsx)("td",{children:e.isPaid?e.paidAt.substring(0,10):Object(l.jsx)("i",{className:"fas fa-times"})}),Object(l.jsx)("td",{children:e.isDelivered?e.deliveredAt.substring(0,10):Object(l.jsx)("i",{className:"fas fa-times"})}),Object(l.jsx)("td",{children:Object(l.jsx)(b.LinkContainer,{to:"/order/".concat(e._id),style:{cursor:"pointer",marginRight:"10px"},children:Object(l.jsx)(it.a,{className:"btn-sm btn-secondary",children:"Details"})})})]},e._id)}))})]})]})};var Rt=function(){return Object(l.jsxs)("div",{className:"body",children:[Object(l.jsx)(ue,{}),Object(l.jsx)(i.a,{className:"py-3",children:Object(l.jsxs)(le.f,{children:[Object(l.jsx)(le.d,{exact:!0,path:"/",element:Object(l.jsx)(at,{})}),Object(l.jsx)(le.d,{exact:!0,path:"/product/:id",element:Object(l.jsx)(st,{})}),Object(l.jsx)(le.d,{exact:!0,path:"/cart",element:Object(l.jsx)(_e,{})}),Object(l.jsx)(le.d,{path:"/cart/:id/*",element:Object(l.jsx)(_e,{})}),Object(l.jsx)(le.d,{path:"/login",element:Object(l.jsx)(ot,{})}),Object(l.jsx)(le.d,{path:"/register",element:Object(l.jsx)(lt,{})}),Object(l.jsx)(le.d,{path:"/profile/",element:Object(l.jsx)(jt,{})}),Object(l.jsx)(le.d,{path:"/login/shipping",element:Object(l.jsx)(pt,{})}),Object(l.jsx)(le.d,{path:"/payment",element:Object(l.jsx)(Ot,{})}),Object(l.jsx)(le.d,{path:"/confirmorder",element:Object(l.jsx)(xt,{})}),Object(l.jsx)(le.d,{path:"/order/:id",element:Object(l.jsx)(ft,{})}),Object(l.jsx)(le.d,{path:"/admin/userlist",element:Object(l.jsx)(yt,{})}),Object(l.jsx)(le.d,{path:"/admin/productlist",element:Object(l.jsx)(vt,{})}),Object(l.jsx)(le.d,{path:"/admin/product/:id/edit",element:Object(l.jsx)(Et,{})}),Object(l.jsx)(le.d,{path:"/admin/orderlist",element:Object(l.jsx)(St,{})})]})})]})},Nt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,151)).then((function(t){var a=t.getCLS,r=t.getFID,c=t.getFCP,n=t.getLCP,s=t.getTTFB;a(e),r(e),c(e),n(e),s(e)}))},Ct=(a(132),a(55)),_t=a(94),It=a(93),Lt=a(2),kt=Object(Ct.combineReducers)({productList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{products:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Te:return{loading:!0,products:[]};case we:return{loading:!1,products:t.payload};case Ae:return{loading:!1,error:t.payload};default:return e}},productDetail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{product:{reviews:[]}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ue:return Object(Lt.a)({loading:!0},e);case Pe:return{loading:!1,product:t.payload};case Fe:return{loading:!1,error:t.payload};default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cartItems:[],shippingAddress:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ve:var a=t.payload,r=e.cartItems.find((function(e){return e.product===a.product}));return r?Object(Lt.a)(Object(Lt.a)({},e),{},{cartItems:e.cartItems.map((function(e){return e.product===r.product?a:e}))}):Object(Lt.a)(Object(Lt.a)({},e),{},{cartItems:[].concat(Object(be.a)(e.cartItems),[a])});case Ee:return Object(Lt.a)(Object(Lt.a)({},e),{},{cartItems:e.cartItems.filter((function(e){return e.product!==t.payload}))});case Se:return Object(Lt.a)(Object(Lt.a)({},e),{},{shippingAddress:t.payload});case Re:return Object(Lt.a)(Object(Lt.a)({},e),{},{paymentMethod:t.payload});case Ne:return Object(Lt.a)(Object(Lt.a)({},e),{},{cartItems:[]});default:return e}},userLogin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return{loading:!0};case v:return{loading:!1,userInfo:t.payload};case E:return{loading:!1,error:t.payload};case S:return{};default:return e}},userRegister:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return{loading:!0};case N:return{loading:!1,userInfo:t.payload};case C:return{loading:!1,error:t.payload};case S:return{};default:return e}},userDetail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return Object(Lt.a)(Object(Lt.a)({},e),{},{loading:!0});case I:return{loading:!1,user:t.payload};case L:return{loading:!1,error:t.payload};default:return e}},userUpdateProfile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return{loading:!0};case D:return{loading:!1,success:!0,userInfo:t.payload};case T:return{loading:!1,error:t.payload};case w:return{};default:return e}},userList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{users:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return{loading:!0};case U:return{loading:!1,users:t.payload};case P:return{loading:!1,error:t.payload};case F:return{users:[]};default:return e}},orderCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:return{loading:!0};case z:return{loading:!1,success:!0,order:t.payload};case G:return{loading:!1,error:t.payload};case V:return{};default:return e}},orderDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!0,orderItems:[],shippingAddress:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y:return Object(Lt.a)(Object(Lt.a)({},e),{},{loading:!0});case J:return{loading:!1,order:t.payload};case W:return{loading:!1,error:t.payload};default:return e}},orderPay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H:return{loading:!0};case K:return{loading:!1,success:!0};case X:return{loading:!1,error:t.payload};case Z:return{};default:return e}},orderDeliver:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case se:return{loading:!0};case ie:return{loading:!1,success:!0};case de:return{loading:!1,error:t.DELIVERload};case oe:return{};default:return e}},orderMyList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{orders:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $:return{loading:!0};case ee:return{loading:!1,orders:t.payload};case te:return{loading:!1,error:t.payload};case ae:return{orders:[]};default:return e}},orderList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{orders:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re:return{loading:!0};case ce:return{loading:!1,orders:t.payload};case ne:return{loading:!1,error:t.payload};default:return e}},userDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:return{loading:!0};case Q:return{loading:!1,success:!0};case q:return{loading:!1,error:t.payload};default:return e}},productDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Be:return{loading:!0};case Qe:return{loading:!1,success:!0};case qe:return{loading:!1,error:t.payload};default:return e}},productCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Me:return{loading:!0};case ze:return{loading:!1,success:!0,product:t.payload};case Ge:return{loading:!1,error:t.payload};case Ve:return{};default:return e}},productUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{product:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ye:return{loading:!0};case Je:return{loading:!1,success:!0,product:t.payload};case We:return{loading:!1,error:t.payload};case He:return{product:{}};default:return e}},productCreateReview:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ke:return{loading:!0};case Xe:return{loading:!1,success:!0};case Ze:return{loading:!1,error:t.payload};case $e:return{};default:return e}}}),Dt=localStorage.getItem("cartItems")?JSON.parse(localStorage.getItem("cartItems")):[],Tt=localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):null,wt={cart:{cartItems:Dt,shippingAddress:localStorage.getItem("shippingAddress")?JSON.parse(localStorage.getItem("shippingAddress")):{}},userLogin:{userInfo:Tt}},At=[_t.a],Ut=Object(Ct.createStore)(kt,wt,Object(It.composeWithDevTools)(Ct.applyMiddleware.apply(void 0,At)));n.a.render(Object(l.jsx)(h.a,{store:Ut,children:Object(l.jsx)(pe.BrowserRouter,{children:Object(l.jsx)(Rt,{})})}),document.getElementById("root")),Nt()}},[[133,1,2]]]);
//# sourceMappingURL=main.2d3874e0.chunk.js.map